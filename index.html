<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Diary Backend API í…ŒìŠ¤íŠ¸</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            margin: 0;
            padding: 0;
        }

        .container {
            max-width: 900px;
            margin: 20px auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.95;
            margin-bottom: 15px;
        }

        .api-url {
            background: rgba(255,255,255,0.2);
            padding: 10px 20px;
            border-radius: 20px;
            display: inline-block;
            font-family: monospace;
            font-size: 0.9rem;
        }

        /* ìµœìƒë‹¨ íƒ­ ë„¤ë¹„ê²Œì´ì…˜ */
        .top-nav {
            background: #f8f9fa;
            border-bottom: 2px solid #e0e0e0;
            padding: 0;
            margin: 0;
        }

        .main-tabs {
            display: flex;
            justify-content: center;
            gap: 0;
            max-width: 1200px;
            margin: 0 auto;
        }

        .main-tab {
            background: transparent;
            color: #666;
            padding: 20px 40px;
            border: none;
            border-bottom: 3px solid transparent;
            cursor: pointer;
            font-weight: 600;
            font-size: 1.1rem;
            transition: all 0.3s;
            position: relative;
        }

        .main-tab:hover {
            background: #fff;
            color: #667eea;
        }

        .main-tab.active {
            background: white;
            color: #667eea;
            border-bottom-color: #667eea;
        }

        .main-tab-content {
            display: none;
            min-height: calc(100vh - 65px);
        }

        .main-tab-content.active {
            display: block;
        }

        #main-tab-api-test {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px 20px 40px 20px;
        }

        #main-tab-prompt-playground {
            background: white;
            padding: 0;
            margin: 0;
        }

        #main-tab-webrtc-test {
            background: white;
            padding: 0;
            margin: 0;
        }

        .content {
            padding: 30px;
        }

        .api-section {
            margin-bottom: 30px;
            border: 1px solid #e0e0e0;
            border-radius: 10px;
            padding: 25px;
            background: #f8f9fa;
        }

        .api-section h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .api-section h4 {
            color: #555;
            margin: 20px 0 10px 0;
            font-size: 1.1rem;
        }

        .api-info {
            margin-bottom: 15px;
            padding: 12px;
            background: #e9ecef;
            border-radius: 5px;
            font-family: monospace;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .method {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 4px;
            font-weight: bold;
            font-size: 0.9rem;
        }

        .method.post { 
            background: #007bff; 
            color: white; 
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 14px 28px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1rem;
            margin-right: 10px;
            margin-top: 15px;
            transition: transform 0.2s, box-shadow 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn-small {
            background: #6c757d;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
            margin-right: 8px;
            margin-bottom: 8px;
            transition: background 0.2s;
        }

        .btn-small:hover {
            background: #5a6268;
        }

        .sample-buttons {
            margin: 15px 0;
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
            font-size: 1rem;
        }

        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            font-family: inherit;
            resize: vertical;
            min-height: 120px;
            transition: border-color 0.2s;
        }

        .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        .response {
            margin-top: 20px;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            max-height: 500px;
            overflow-y: auto;
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .response.success {
            background: #d4edda;
            border: 2px solid #c3e6cb;
            color: #155724;
        }

        .response.error {
            background: #f8d7da;
            border: 2px solid #f5c6cb;
            color: #721c24;
        }

        .result-section {
            margin: 15px 0;
            padding: 12px;
            background: rgba(255,255,255,0.5);
            border-radius: 5px;
        }

        .result-section strong {
            display: block;
            margin-bottom: 8px;
            font-size: 1.05rem;
        }

        .result-section p {
            margin: 5px 0;
            line-height: 1.6;
        }

        .result-section ul {
            margin: 5px 0;
            padding-left: 25px;
        }

        .result-section li {
            margin: 5px 0;
            line-height: 1.5;
        }

        .meta-info {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid rgba(0,0,0,0.1);
            text-align: right;
            opacity: 0.8;
        }

        .code-block {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 15px;
            border-radius: 8px;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            line-height: 1.5;
            margin: 10px 0;
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #3498db;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .hidden {
            display: none;
        }

        .description {
            color: #666;
            line-height: 1.6;
            margin: 15px 0;
        }

        .feature-list {
            margin: 15px 0;
            padding-left: 0;
            list-style: none;
        }

        .feature-list li {
            padding: 8px 0;
            padding-left: 25px;
            position: relative;
        }

        .feature-list li:before {
            content: "âœ“";
            position: absolute;
            left: 0;
            color: #28a745;
            font-weight: bold;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }
            
            .content {
                padding: 20px;
            }
            
            .api-section {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <!-- ìµœìƒë‹¨ íƒ­ ë„¤ë¹„ê²Œì´ì…˜ -->
    <div class="top-nav">
        <div class="main-tabs">
            <button class="main-tab active" onclick="switchMainTab('api-test')">
                ğŸ§ª API í…ŒìŠ¤íŠ¸
            </button>
            <button class="main-tab" onclick="switchMainTab('prompt-playground')">
                ğŸ¨ í”„ë¡¬í”„íŠ¸ í”Œë ˆì´ê·¸ë¼ìš´ë“œ
            </button>
            <button class="main-tab" onclick="switchMainTab('webrtc-test')">
                ğŸŒ WebRTC í…ŒìŠ¤íŠ¸
            </button>
        </div>
    </div>

    <!-- API í…ŒìŠ¤íŠ¸ íƒ­ ì»¨í…ì¸  -->
    <div id="main-tab-api-test" class="main-tab-content active">
    <div class="container">
        <div class="header">
            <h1>ğŸ“” Diary Backend API</h1>
            <p>ìŒì„± ì¼ê¸° ì •ë¦¬ API í…ŒìŠ¤íŠ¸</p>
            <div class="api-url">https://diary-backend-beta.vercel.app</div>
        </div>
        <div class="content">
            <!-- 1. Organize Diary API ì„¹ì…˜ -->
            <div class="api-section">
                <h3>âœ¨ ì¼ê¸° ì •ë¦¬ API</h3>
                <div class="api-info">
                    <span class="method post">POST</span>
                    <span>https://diary-backend-beta.vercel.app/api/organize-diary</span>
                </div>
                <p class="description">
                    ìŒì„± ì „ì‚¬ í…ìŠ¤íŠ¸ë¥¼ ë°›ì•„ì„œ êµ¬ì¡°í™”ëœ ì¼ê¸°ë¡œ ìë™ ë³€í™˜í•©ë‹ˆë‹¤.
                    OpenAI GPT-4oë¥¼ ì‚¬ìš©í•˜ì—¬ í•˜ë£¨ì˜ ì¼ìƒ, ëª©í‘œ, ê°ì‚¬í•œ ì¼, ê°ì • ë“±ì„ ë¶„ì„í•˜ê³  ì •ë¦¬í•©ë‹ˆë‹¤.
                </p>
                
                <div class="form-group">
                    <label for="diary-text">ğŸ’¬ ìŒì„± ì „ì‚¬ í…ìŠ¤íŠ¸ ì…ë ¥:</label>
                    <textarea 
                        id="diary-text" 
                        placeholder="ì˜¤ëŠ˜ ìˆì—ˆë˜ ì¼ë“¤ì„ ììœ ë¡­ê²Œ ì…ë ¥í•´ì£¼ì„¸ìš”...&#10;&#10;ì˜ˆ: ì˜¤ëŠ˜ì€ ì•„ì¹¨ ì¼ì° ì¼ì–´ë‚˜ì„œ 30ë¶„ ì¡°ê¹…ì„ í–ˆì–´ìš”. ë‚ ì”¨ê°€ ë„ˆë¬´ ì¢‹ì•„ì„œ ê¸°ë¶„ì´ ìƒì¾Œí–ˆìŠµë‹ˆë‹¤..."
                    ></textarea>
                </div>

                <div class="form-group">
                    <label for="diary-llm-provider">ğŸ¤– LLM í”„ë¡œë°”ì´ë” ì„ íƒ:</label>
                    <select id="diary-llm-provider" style="width: 100%; padding: 10px; border: 2px solid #ddd; border-radius: 8px; font-size: 1rem;">
                        <option value="openai">OpenAI (gpt-4o)</option>
                        <option value="onpremise">ì˜¨í”„ë ˆë¯¸ìŠ¤ (LFM2-2.6B)</option>
                    </select>
                </div>

                <div class="sample-buttons">
                    <strong style="display: block; margin-bottom: 10px; color: #555;">ìƒ˜í”Œ ë°ì´í„°:</strong>
                    <button class="btn-small" onclick="loadSample(1)">ğŸ“ ìƒ˜í”Œ 1: ì¼ìƒ ì´ì•¼ê¸°</button>
                    <button class="btn-small" onclick="loadSample(2)">ğŸ’ª ìƒ˜í”Œ 2: ìš´ë™ ì¼ê¸°</button>
                    <button class="btn-small" onclick="loadSample(3)">ğŸ˜Š ìƒ˜í”Œ 3: ì§§ì€ ì¼ê¸°</button>
                    <button class="btn-small" onclick="clearText()">ğŸ—‘ï¸ ì§€ìš°ê¸°</button>
                </div>

                <button class="btn" onclick="organizeDiary()">
                    <span>ì¼ê¸° ì •ë¦¬í•˜ê¸°</span>
                    <span class="loading hidden" id="organize-loading"></span>
                </button>

                <div class="response hidden" id="organize-response"></div>
            </div>

            <!-- 2. ìŒì„± ì „ì‚¬ (STT) API ì„¹ì…˜ -->
            <div class="api-section">
                <h3>ğŸ™ï¸ ìŒì„± ì „ì‚¬ (STT) API</h3>
                <div class="api-info">
                    <span class="method post">POST</span>
                    <span>https://diary-backend-beta.vercel.app/api/audio/transcribe</span>
                </div>
                <p class="description">
                    ì˜¤ë””ì˜¤ íŒŒì¼ì„ í…ìŠ¤íŠ¸ë¡œ ë³€í™˜í•©ë‹ˆë‹¤. OpenAI Whisper (gpt-4o-transcribe)ë¥¼ ì‚¬ìš©í•˜ì—¬
                    í•œêµ­ì–´ ìŒì„±ì„ ì •í™•í•˜ê²Œ ì „ì‚¬í•©ë‹ˆë‹¤. ì¼ê¸° ì‘ì„±ì„ ìœ„í•œ ìŒì„± ë…¹ìŒ íŒŒì¼ ì²˜ë¦¬ì— ìµœì í™”ë˜ì–´ ìˆìŠµë‹ˆë‹¤.
                </p>
                
                <div class="form-group">
                    <label for="audio-file">ğŸµ ì˜¤ë””ì˜¤ íŒŒì¼ ì„ íƒ:</label>
                    <input type="file" id="audio-file" accept="audio/*" style="width: 100%; padding: 10px; border: 2px solid #ddd; border-radius: 8px;">
                    <small style="display: block; margin-top: 8px; color: #666;">
                        ì§€ì› í˜•ì‹: mp4, mp3, wav, m4a, webm (ìµœëŒ€ 10MB)
                    </small>
                </div>

                <button class="btn" onclick="transcribeAudio()">
                    <span>ìŒì„± ì „ì‚¬í•˜ê¸°</span>
                    <span class="loading hidden" id="transcribe-loading"></span>
                </button>

                <div class="response hidden" id="transcribe-response"></div>
            </div>

            <!-- 3. ìŒì„± í•©ì„± (TTS) API ì„¹ì…˜ -->
            <div class="api-section">
                <h3>ğŸ”Š ìŒì„± í•©ì„± (TTS) API</h3>
                <div class="api-info">
                    <span class="method post">POST</span>
                    <span>https://diary-backend-beta.vercel.app/api/audio/speech</span>
                </div>
                <p class="description">
                    í…ìŠ¤íŠ¸ë¥¼ ìì—°ìŠ¤ëŸ¬ìš´ ìŒì„±ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤. OpenAI TTS (gpt-4o-mini-tts)ë¥¼ ì‚¬ìš©í•˜ì—¬
                    í•œêµ­ì–´ ìŒì„±ì„ ìƒì„±í•©ë‹ˆë‹¤. í™˜ì˜ ë©”ì‹œì§€ë‚˜ ì•Œë¦¼ ìŒì„± ìƒì„±ì— ì‚¬ìš©ë©ë‹ˆë‹¤.
                </p>
                
                <div class="form-group">
                    <label for="tts-text">ğŸ’¬ ìŒì„±ìœ¼ë¡œ ë³€í™˜í•  í…ìŠ¤íŠ¸:</label>
                    <textarea 
                        id="tts-text" 
                        placeholder="ì•ˆë…•í•˜ì„¸ìš”! ë§Œë‚˜ì„œ ë°˜ê°‘ìŠµë‹ˆë‹¤."
                        style="min-height: 80px;"
                    ></textarea>
                </div>

                <div class="form-group">
                    <label for="tts-voice">ğŸ¤ ìŒì„± ì„ íƒ:</label>
                    <select id="tts-voice" style="width: 100%; padding: 10px; border: 2px solid #ddd; border-radius: 8px; font-size: 1rem;">
                        <option value="alloy">Alloy (ì¤‘ì„±ì )</option>
                        <option value="echo">Echo (ë‚¨ì„±)</option>
                        <option value="fable">Fable (ì˜êµ­ ë‚¨ì„±)</option>
                        <option value="onyx">Onyx (ê¹Šì€ ë‚¨ì„±)</option>
                        <option value="nova">Nova (ì—¬ì„±)</option>
                        <option value="shimmer">Shimmer (ë°ì€ ì—¬ì„±)</option>
                    </select>
                </div>

                <button class="btn" onclick="generateSpeech()">
                    <span>ìŒì„± ìƒì„±í•˜ê¸°</span>
                    <span class="loading hidden" id="tts-loading"></span>
                </button>

                <div class="response hidden" id="tts-response"></div>
            </div>

            <!-- 4. ëŒ€í™” ì»¨í…ìŠ¤íŠ¸ ì¶”ì¶œ API ì„¹ì…˜ -->
            <div class="api-section">
                <h3>ğŸ§  ëŒ€í™” ì»¨í…ìŠ¤íŠ¸ ì¶”ì¶œ API</h3>
                <div class="api-info">
                    <span class="method post">POST</span>
                    <span>https://diary-backend-beta.vercel.app/api/context/extract</span>
                </div>
                <p class="description">
                    ëŒ€í™” ë‚´ìš©ì„ ë¶„ì„í•˜ì—¬ ì£¼ìš” ì»¨í…ìŠ¤íŠ¸ë¥¼ ì¶”ì¶œí•©ë‹ˆë‹¤. ì£¼ì œ, ì˜ë„, í‚¤ì›Œë“œ, ê°ì •, íë¦„ì„ 
                    GPT-4oë¡œ ë¶„ì„í•˜ì—¬ ê°„ê²°í•˜ê²Œ ì •ë¦¬í•©ë‹ˆë‹¤.
                </p>
                
                <div class="form-group">
                    <label for="context-conversation">ğŸ’¬ ëŒ€í™” ë‚´ìš©:</label>
                    <textarea 
                        id="context-conversation" 
                        placeholder="ì‚¬ìš©ì: ì˜¤ëŠ˜ ìš´ë™ì„ í–ˆì–´ìš”&#10;AI: ì¢‹ì€ ìŠµê´€ì´ë„¤ìš”! ì–´ë–¤ ìš´ë™ì„ í•˜ì…¨ë‚˜ìš”?&#10;ì‚¬ìš©ì: ì¡°ê¹… 30ë¶„ í–ˆìŠµë‹ˆë‹¤"
                    ></textarea>
                </div>

                <div class="form-group">
                    <label for="context-llm-provider">ğŸ¤– LLM í”„ë¡œë°”ì´ë” ì„ íƒ:</label>
                    <select id="context-llm-provider" style="width: 100%; padding: 10px; border: 2px solid #ddd; border-radius: 8px; font-size: 1rem;">
                        <option value="openai">OpenAI (gpt-4o)</option>
                        <option value="onpremise">ì˜¨í”„ë ˆë¯¸ìŠ¤ (LFM2-2.6B)</option>
                    </select>
                </div>

                <button class="btn" onclick="extractContext()">
                    <span>ì»¨í…ìŠ¤íŠ¸ ì¶”ì¶œí•˜ê¸°</span>
                    <span class="loading hidden" id="context-loading"></span>
                </button>

                <div class="response hidden" id="context-response"></div>
            </div>

            <!-- 5. Realtime Token ë°œê¸‰ API ì„¹ì…˜ -->
            <div class="api-section">
                <h3>ğŸ™ï¸ Realtime Token ë°œê¸‰ API</h3>
                <div class="api-info">
                    <span class="method post">POST</span>
                    <span>https://diary-backend-beta.vercel.app/api/realtime/token</span>
                </div>
                <p class="description">
                    React Native ì•±ì—ì„œ ì‚¬ìš©í•  Ephemeral Tokenì„ ë°œê¸‰í•©ë‹ˆë‹¤. 
                    ì´ í† í°ì€ 30ë¶„ê°„ ìœ íš¨í•˜ë©° í´ë¼ì´ì–¸íŠ¸ì—ì„œ OpenAI Realtime APIì— ì§ì ‘ ì—°ê²°í•  ë•Œ ì‚¬ìš©ë©ë‹ˆë‹¤.
                    <strong>ë³´ì•ˆ:</strong> API í‚¤ë¥¼ ì•±ì— ë…¸ì¶œí•˜ì§€ ì•Šê³  ì•ˆì „í•˜ê²Œ ì‹¤ì‹œê°„ ìŒì„± ëŒ€í™”ë¥¼ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                </p>
                
                <div class="form-group">
                    <label for="realtime-model">ğŸ¤– ëª¨ë¸ ì„ íƒ:</label>
                    <select id="realtime-model" style="width: 100%; padding: 10px; border: 2px solid #ddd; border-radius: 8px; font-size: 1rem;">
                        <option value="gpt-4o-realtime-preview-2024-12-17">GPT-4o Realtime (2024-12-17) - ê¶Œì¥</option>
                        <option value="gpt-4o-mini-realtime-preview">GPT-4o Mini Realtime</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="realtime-voice">ğŸ¤ ìŒì„± ì„ íƒ:</label>
                    <select id="realtime-voice" style="width: 100%; padding: 10px; border: 2px solid #ddd; border-radius: 8px; font-size: 1rem;">
                        <option value="alloy">Alloy (ì¤‘ì„±ì )</option>
                        <option value="echo">Echo (ë‚¨ì„±)</option>
                        <option value="shimmer">Shimmer (ë°ì€ ì—¬ì„±)</option>
                        <option value="ash">Ash</option>
                        <option value="ballad">Ballad</option>
                        <option value="coral">Coral</option>
                        <option value="sage">Sage</option>
                        <option value="verse">Verse</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="realtime-instructions">ğŸ“ ì‹œìŠ¤í…œ ì§€ì‹œì‚¬í•­:</label>
                    <textarea 
                        id="realtime-instructions" 
                        placeholder="ë‹¹ì‹ ì€ ì¹œê·¼í•œ ì¼ê¸° ì‘ì„± ë„ìš°ë¯¸ì…ë‹ˆë‹¤..."
                        style="min-height: 100px;"
                    >ë‹¹ì‹ ì€ ì¹œê·¼í•˜ê³  ë”°ëœ»í•œ ì¼ê¸° ì‘ì„± ë„ìš°ë¯¸ì…ë‹ˆë‹¤. ì‚¬ìš©ìì˜ í•˜ë£¨ ì´ì•¼ê¸°ë¥¼ ê²½ì²­í•˜ê³  ê³µê°í•˜ë©° ëŒ€í™”ë¥¼ ì´ì–´ê°€ì„¸ìš”. ìì—°ìŠ¤ëŸ½ê²Œ ì§ˆë¬¸í•˜ê³  ì‚¬ìš©ìê°€ ë” ë§ì€ ì´ì•¼ê¸°ë¥¼ í•  ìˆ˜ ìˆë„ë¡ ê²©ë ¤í•´ì£¼ì„¸ìš”.</textarea>
                </div>

                <button class="btn" onclick="createRealtimeToken()">
                    <span>ğŸ” í† í° ë°œê¸‰í•˜ê¸°</span>
                    <span class="loading hidden" id="realtime-token-loading"></span>
                </button>

                <div class="response hidden" id="realtime-token-response"></div>
            </div>

            <!-- 6. ì „ì²´ API ëª…ì„¸ì„œ ì„¹ì…˜ -->
            <div class="api-section">
                <h3>ğŸ“– ì „ì²´ API ëª…ì„¸ì„œ</h3>
                <p class="description" style="background: #fff3cd; padding: 15px; border-left: 4px solid #ffc107; border-radius: 5px; margin-bottom: 20px;">
                    <strong>ğŸ’¡ ë¹„ê°œë°œìë¥¼ ìœ„í•œ ê°€ì´ë“œ:</strong><br>
                    ì•„ë˜ ëª…ì„¸ì„œëŠ” ê° APIì˜ ì „ì²´ URL, í•„ìš”í•œ ë°ì´í„°, ë°›ì„ ìˆ˜ ìˆëŠ” ì‘ë‹µì„ ì •ë¦¬í•œ ê²ƒì…ë‹ˆë‹¤.<br>
                    ê°œë°œ ì§€ì‹ì´ ì—†ì–´ë„ ì´ ë¬¸ì„œë§Œ ë³´ê³  APIë¥¼ ì´í•´í•˜ê³  í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                </p>

                <!-- API 1: ì¼ê¸° ì •ë¦¬ -->
                <h4 style="background: #667eea; color: white; padding: 10px 15px; border-radius: 5px; margin-top: 25px;">
                    1ï¸âƒ£ ì¼ê¸° ì •ë¦¬ API
                </h4>
                <div style="margin-left: 15px;">
                    <p><strong>ğŸŒ ì „ì²´ URL:</strong></p>
                    <pre class="code-block" style="background: #f8f9fa; color: #333; border-left: 4px solid #667eea;">POST https://diary-backend-beta.vercel.app/api/organize-diary</pre>
                    
                    <p><strong>ğŸ“ ë¬´ì—‡ì„ í•˜ë‚˜ìš”?</strong></p>
                    <p style="margin-left: 15px;">ìŒì„±ìœ¼ë¡œ ë…¹ìŒí•œ ì¼ê¸°ë¥¼ AIê°€ ì •ë¦¬í•´ì„œ êµ¬ì¡°í™”ëœ í˜•íƒœë¡œ ë§Œë“¤ì–´ì¤ë‹ˆë‹¤.</p>
                    
                    <p><strong>ğŸ“¥ ë³´ë‚´ì•¼ í•  ë°ì´í„°:</strong></p>
                    <pre class="code-block">{
  "text": "ì˜¤ëŠ˜ ì•„ì¹¨ì— ìš´ë™í–ˆì–´ìš”. ë‚ ì”¨ê°€ ì¢‹ì•˜ìŠµë‹ˆë‹¤.",
  "llmProvider": "openai"  // ì„ íƒì‚¬í•­: "openai" ë˜ëŠ” "onpremise"
}</pre>

                    <p><strong>ğŸ“¤ ë°›ì„ ìˆ˜ ìˆëŠ” ì‘ë‹µ (ì„±ê³µ):</strong></p>
                    <pre class="code-block">{
  "success": true,
  "summary": {
    "oneLiner": "ìƒì¾Œí•œ ì•„ì¹¨ ìš´ë™ìœ¼ë¡œ ì‹œì‘í•œ í•˜ë£¨",
    "dailyHighlights": ["ì•„ì¹¨ ìš´ë™", "ì¢‹ì€ ë‚ ì”¨"],
    "goalTracking": ["ìš´ë™ ëª©í‘œ ë‹¬ì„±"],
    "gratitude": ["ì¢‹ì€ ë‚ ì”¨"],
    "emotions": ["ìƒì¾Œí•¨", "ë¿Œë“¯í•¨"],
    "fullDiary": "ì˜¤ëŠ˜ì€ ì•„ì¹¨ ì¼ì° ì¼ì–´ë‚˜ì„œ ìš´ë™ì„ í–ˆë‹¤. ë‚ ì”¨ë„ ì¢‹ì•„ì„œ ê¸°ë¶„ì´ ìƒì¾Œí–ˆë‹¤."
  },
  "originalTextLength": 42,
  "tokensUsed": 450,
  "llmProvider": "openai",
  "model": "gpt-4o"
}</pre>
                </div>

                <!-- API 2: ìŒì„± ì „ì‚¬ -->
                <h4 style="background: #667eea; color: white; padding: 10px 15px; border-radius: 5px; margin-top: 30px;">
                    2ï¸âƒ£ ìŒì„± ì „ì‚¬ API (Whisper)
                </h4>
                <div style="margin-left: 15px;">
                    <p><strong>ğŸŒ ì „ì²´ URL:</strong></p>
                    <pre class="code-block" style="background: #f8f9fa; color: #333; border-left: 4px solid #667eea;">POST https://diary-backend-beta.vercel.app/api/audio/transcribe</pre>
                    
                    <p><strong>ğŸ“ ë¬´ì—‡ì„ í•˜ë‚˜ìš”?</strong></p>
                    <p style="margin-left: 15px;">ë…¹ìŒëœ ìŒì„± íŒŒì¼ì„ í…ìŠ¤íŠ¸ë¡œ ìë™ ë³€í™˜í•©ë‹ˆë‹¤.</p>
                    
                    <p><strong>ğŸ“¥ ë³´ë‚´ì•¼ í•  ë°ì´í„°:</strong></p>
                    <p style="margin-left: 15px; background: #e9ecef; padding: 10px; border-radius: 5px;">
                        <code>multipart/form-data</code> í˜•ì‹ìœ¼ë¡œ íŒŒì¼ ì „ì†¡<br>
                        â€¢ í•„ë“œëª…: <code>file</code><br>
                        â€¢ ì§€ì› í˜•ì‹: mp4, mp3, wav, m4a, webm<br>
                        â€¢ ìµœëŒ€ í¬ê¸°: 10MB
                    </p>

                    <p><strong>ğŸ“¤ ë°›ì„ ìˆ˜ ìˆëŠ” ì‘ë‹µ (ì„±ê³µ):</strong></p>
                    <pre class="code-block">{
  "success": true,
  "text": "ì˜¤ëŠ˜ ì•„ì¹¨ì— ì¼ì° ì¼ì–´ë‚˜ì„œ ìš´ë™ì„ í–ˆì–´ìš”. ë‚ ì”¨ê°€ ì •ë§ ì¢‹ì•˜ìŠµë‹ˆë‹¤.",
  "language": "ko",
  "duration": 15.2
}</pre>
                </div>

                <!-- API 3: TTS -->
                <h4 style="background: #667eea; color: white; padding: 10px 15px; border-radius: 5px; margin-top: 30px;">
                    3ï¸âƒ£ í…ìŠ¤íŠ¸ ìŒì„± í•©ì„± API (TTS)
                </h4>
                <div style="margin-left: 15px;">
                    <p><strong>ğŸŒ ì „ì²´ URL:</strong></p>
                    <pre class="code-block" style="background: #f8f9fa; color: #333; border-left: 4px solid #667eea;">POST https://diary-backend-beta.vercel.app/api/audio/speech</pre>
                    
                    <p><strong>ğŸ“ ë¬´ì—‡ì„ í•˜ë‚˜ìš”?</strong></p>
                    <p style="margin-left: 15px;">í…ìŠ¤íŠ¸ë¥¼ ìì—°ìŠ¤ëŸ¬ìš´ ìŒì„±ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.</p>
                    
                    <p><strong>ğŸ“¥ ë³´ë‚´ì•¼ í•  ë°ì´í„°:</strong></p>
                    <pre class="code-block">{
  "text": "ì•ˆë…•í•˜ì„¸ìš”, ë§Œë‚˜ì„œ ë°˜ê°‘ìŠµë‹ˆë‹¤.",
  "voice": "alloy",  // ì„ íƒì‚¬í•­: alloy, echo, shimmer ë“±
  "instructions": "ì¹œê·¼í•˜ê³  ë°ì€ í†¤ìœ¼ë¡œ",  // ì„ íƒì‚¬í•­
  "response_format": "mp3"  // ì„ íƒì‚¬í•­: mp3, wav, opus ë“±
}</pre>

                    <p><strong>ğŸ“¤ ë°›ì„ ìˆ˜ ìˆëŠ” ì‘ë‹µ (ì„±ê³µ):</strong></p>
                    <p style="margin-left: 15px; background: #d4edda; padding: 10px; border-radius: 5px;">
                        MP3 ì˜¤ë””ì˜¤ íŒŒì¼ (ë°”ì´ë„ˆë¦¬ ë°ì´í„°)<br>
                        ë¸Œë¼ìš°ì €ì—ì„œ ì§ì ‘ ì¬ìƒí•˜ê±°ë‚˜ ë‹¤ìš´ë¡œë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                    </p>
                </div>

                <!-- API 4: ì»¨í…ìŠ¤íŠ¸ ì¶”ì¶œ -->
                <h4 style="background: #667eea; color: white; padding: 10px 15px; border-radius: 5px; margin-top: 30px;">
                    4ï¸âƒ£ ëŒ€í™” ì»¨í…ìŠ¤íŠ¸ ì¶”ì¶œ API
                </h4>
                <div style="margin-left: 15px;">
                    <p><strong>ğŸŒ ì „ì²´ URL:</strong></p>
                    <pre class="code-block" style="background: #f8f9fa; color: #333; border-left: 4px solid #667eea;">POST https://diary-backend-beta.vercel.app/api/context/extract</pre>
                    
                    <p><strong>ğŸ“ ë¬´ì—‡ì„ í•˜ë‚˜ìš”?</strong></p>
                    <p style="margin-left: 15px;">ëŒ€í™” ë‚´ìš©ì—ì„œ ì£¼ìš” ì •ë³´(ì£¼ì œ, ì˜ë„, ê°ì • ë“±)ë¥¼ ìë™ìœ¼ë¡œ ë¶„ì„í•©ë‹ˆë‹¤.</p>
                    
                    <p><strong>ğŸ“¥ ë³´ë‚´ì•¼ í•  ë°ì´í„°:</strong></p>
                    <pre class="code-block">{
  "conversationText": "ì‚¬ìš©ì: ì˜¤ëŠ˜ ìš´ë™í–ˆì–´ìš”\nAI: ì¢‹ë„¤ìš”! ì–´ë–¤ ìš´ë™ í•˜ì…¨ë‚˜ìš”?",
  "llmProvider": "openai"  // ì„ íƒì‚¬í•­
}</pre>

                    <p><strong>ğŸ“¤ ë°›ì„ ìˆ˜ ìˆëŠ” ì‘ë‹µ (ì„±ê³µ):</strong></p>
                    <pre class="code-block">{
  "success": true,
  "context": "â€¢ ì£¼ìš” ì£¼ì œ: ìš´ë™ ë° ê±´ê°• ê´€ë¦¬\nâ€¢ ì‚¬ìš©ì ì˜ë„: ìš´ë™ í™œë™ ê³µìœ \nâ€¢ í‚¤ì›Œë“œ: ìš´ë™, ê±´ê°•\nâ€¢ ê°ì • í†¤: ê¸ì •ì ",
  "conversationLength": 50,
  "tokensUsed": 120,
  "llmProvider": "openai",
  "model": "gpt-4o"
}</pre>
                </div>

                <!-- API 5: Realtime í† í° -->
                <h4 style="background: #667eea; color: white; padding: 10px 15px; border-radius: 5px; margin-top: 30px;">
                    5ï¸âƒ£ ì‹¤ì‹œê°„ ìŒì„± ëŒ€í™” í† í° ë°œê¸‰ API
                </h4>
                <div style="margin-left: 15px;">
                    <p><strong>ğŸŒ ì „ì²´ URL:</strong></p>
                    <pre class="code-block" style="background: #f8f9fa; color: #333; border-left: 4px solid #667eea;">POST https://diary-backend-beta.vercel.app/api/realtime/token</pre>
                    
                    <p><strong>ğŸ“ ë¬´ì—‡ì„ í•˜ë‚˜ìš”?</strong></p>
                    <p style="margin-left: 15px;">WebRTC ì‹¤ì‹œê°„ ìŒì„± ëŒ€í™”ë¥¼ ìœ„í•œ ë³´ì•ˆ í† í°ì„ ìƒì„±í•©ë‹ˆë‹¤ (30ë¶„ ìœ íš¨).</p>
                    
                    <p><strong>ğŸ“¥ ë³´ë‚´ì•¼ í•  ë°ì´í„°:</strong></p>
                    <pre class="code-block">{
  "userId": "user_12345",  // ì„ íƒì‚¬í•­
  "sessionConfig": {
    "model": "gpt-4o-realtime-preview-2024-12-17",  // í•„ìˆ˜
    "voice": "alloy",  // ì„ íƒì‚¬í•­
    "instructions": "ì¹œê·¼í•œ ì¼ê¸° ë„ìš°ë¯¸ì²˜ëŸ¼ ëŒ€í™”í•´ì£¼ì„¸ìš”"  // ì„ íƒì‚¬í•­
  }
}</pre>

                    <p><strong>ğŸ“¤ ë°›ì„ ìˆ˜ ìˆëŠ” ì‘ë‹µ (ì„±ê³µ):</strong></p>
                    <pre class="code-block">{
  "success": true,
  "token": "ek_68af296e8e408191a1120ab6383263c2",  // âš ï¸ ì¤‘ìš”: ì•ˆì „í•˜ê²Œ ë³´ê´€
  "sessionId": "sess_C9CiUVUzUzYIssh3ELY1d",
  "expiresAt": 1756310470,  // Unix timestamp (30ë¶„ í›„)
  "config": {
    "model": "gpt-4o-realtime-preview-2024-12-17",
    "voice": "alloy"
  }
}</pre>
                    <p style="background: #fff3cd; padding: 10px; border-left: 4px solid #ffc107; border-radius: 5px; margin-top: 10px;">
                        <strong>âš ï¸ ì£¼ì˜:</strong> ë°›ì€ <code>token</code>ì€ WebRTC ì—°ê²° ì‹œ ì‚¬ìš©ë©ë‹ˆë‹¤. 30ë¶„ í›„ ìë™ ë§Œë£Œë©ë‹ˆë‹¤.
                    </p>
                </div>

                <!-- API 6: ì„¸ì…˜ ì¢…ë£Œ -->
                <h4 style="background: #667eea; color: white; padding: 10px 15px; border-radius: 5px; margin-top: 30px;">
                    6ï¸âƒ£ ì‹¤ì‹œê°„ ëŒ€í™” ì„¸ì…˜ ì¢…ë£Œ API
                </h4>
                <div style="margin-left: 15px;">
                    <p><strong>ğŸŒ ì „ì²´ URL:</strong></p>
                    <pre class="code-block" style="background: #f8f9fa; color: #333; border-left: 4px solid #667eea;">POST https://diary-backend-beta.vercel.app/api/realtime/end</pre>
                    
                    <p><strong>ğŸ“ ë¬´ì—‡ì„ í•˜ë‚˜ìš”?</strong></p>
                    <p style="margin-left: 15px;">ì‹¤ì‹œê°„ ìŒì„± ëŒ€í™”ê°€ ëë‚¬ì„ ë•Œ ì‚¬ìš©ëŸ‰(í†µí™” ì‹œê°„, ë©”ì‹œì§€ ìˆ˜ ë“±)ì„ ê¸°ë¡í•©ë‹ˆë‹¤.</p>
                    
                    <p><strong>ğŸ“¥ ë³´ë‚´ì•¼ í•  ë°ì´í„°:</strong></p>
                    <pre class="code-block">{
  "sessionId": "sess_C9CiUVUzUzYIssh3ELY1d",  // í•„ìˆ˜ (í† í° ë°œê¸‰ ì‹œ ë°›ì€ ID)
  "duration": 320,  // ì„ íƒì‚¬í•­: í†µí™” ì‹œê°„(ì´ˆ)
  "messageCount": 15,  // ì„ íƒì‚¬í•­: ë©”ì‹œì§€ ìˆ˜
  "endedBy": "user"  // ì„ íƒì‚¬í•­: "user", "timeout", "error"
}</pre>

                    <p><strong>ğŸ“¤ ë°›ì„ ìˆ˜ ìˆëŠ” ì‘ë‹µ (ì„±ê³µ):</strong></p>
                    <pre class="code-block">{
  "success": true,
  "message": "Session ended and logged successfully",
  "sessionData": {
    "sessionId": "sess_C9CiUVUzUzYIssh3ELY1d",
    "duration": 320,
    "messageCount": 15,
    "endedBy": "user"
  }
}</pre>
                </div>

                <!-- ê³µí†µ ì—ëŸ¬ ì‘ë‹µ -->
                <h4 style="background: #dc3545; color: white; padding: 10px 15px; border-radius: 5px; margin-top: 30px;">
                    âŒ ê³µí†µ ì—ëŸ¬ ì‘ë‹µ
                </h4>
                <div style="margin-left: 15px;">
                    <p><strong>ëª¨ë“  APIì—ì„œ ì—ëŸ¬ ë°œìƒ ì‹œ:</strong></p>
                    <pre class="code-block">{
  "success": false,
  "error": "êµ¬ì²´ì ì¸ ì—ëŸ¬ ë©”ì‹œì§€",
  "details": "ìƒì„¸ ì •ë³´ (ê°œë°œ ëª¨ë“œì—ì„œë§Œ í‘œì‹œ)"
}</pre>
                    <p style="margin-left: 15px;">
                        <strong>ì£¼ìš” ì—ëŸ¬ ì½”ë“œ:</strong><br>
                        â€¢ <code>400</code>: ì˜ëª»ëœ ìš”ì²­ (í•„ìˆ˜ íŒŒë¼ë¯¸í„° ëˆ„ë½)<br>
                        â€¢ <code>401</code>: API í‚¤ ì¸ì¦ ì‹¤íŒ¨<br>
                        â€¢ <code>402</code>: API í• ë‹¹ëŸ‰ ì´ˆê³¼<br>
                        â€¢ <code>413</code>: íŒŒì¼ í¬ê¸° ì´ˆê³¼ (10MB ì´ìƒ)<br>
                        â€¢ <code>500</code>: ì„œë²„ ë‚´ë¶€ ì˜¤ë¥˜
                    </p>
                </div>
            </div>

            <!-- 3. cURL ì˜ˆì œ ì„¹ì…˜ -->
            <div class="api-section">
                <h3>ğŸ’» cURL ëª…ë ¹ì–´</h3>
                <p class="description">í„°ë¯¸ë„ì—ì„œ ì§ì ‘ APIë¥¼ í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                <pre class="code-block" id="curl-command">curl -X POST https://diary-backend-beta.vercel.app/api/organize-diary \
  -H "Content-Type: application/json" \
  -d '{
    "text": "ì˜¤ëŠ˜ì€ ì•„ì¹¨ ì¼ì° ì¼ì–´ë‚˜ì„œ ìš´ë™ì„ í–ˆì–´ìš”. ê¸°ë¶„ì´ ì¢‹ì•˜ìŠµë‹ˆë‹¤."
  }'</pre>
                <button class="btn-small" onclick="copyCurl()">ğŸ“‹ ë³µì‚¬í•˜ê¸°</button>
            </div>

            <!-- 4. React Native ì—°ë™ ì˜ˆì œ -->
            <div class="api-section">
                <h3>ğŸ“± React Native ì—°ë™ ì˜ˆì œ</h3>
                <p class="description">React Native ì•±ì—ì„œ ì´ APIë¥¼ í˜¸ì¶œí•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤.</p>
                <pre class="code-block">// VoiceRecordingModal.tsx

const organizeDiary = async (transcribedText) => {
  try {
    const response = await fetch(
      'https://diary-backend-beta.vercel.app/api/organize-diary',
      {
        method: 'POST',
        headers: { 
          'Content-Type': 'application/json' 
        },
        body: JSON.stringify({ 
          text: transcribedText 
        }),
      }
    );

    const data = await response.json();
    
    if (data.success) {
      const summary = {
        ...data.summary,
        originalText: transcribedText,
        date: new Date(),
      };
      
      console.log('ì¼ê¸° ì •ë¦¬ ì™„ë£Œ:', summary);
      onDiarySummaryComplete(summary);
    } else {
      console.error('ì—ëŸ¬:', data.error);
    }
  } catch (error) {
    console.error('API í˜¸ì¶œ ì‹¤íŒ¨:', error);
  }
};</pre>
            </div>

            <!-- 5. ê¸°ìˆ  ìŠ¤íƒ -->
            <div class="api-section">
                <h3>ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ</h3>
                <ul class="feature-list">
                    <li><strong>Backend Framework</strong>: Vercel Serverless Functions (Node.js 22.x)</li>
                    <li><strong>AI Model</strong>: OpenAI GPT-4o</li>
                    <li><strong>Response Format</strong>: JSON Schema (Structured Output)</li>
                    <li><strong>Deployment</strong>: Vercel (ìë™ ë°°í¬)</li>
                    <li><strong>CORS</strong>: ëª¨ë“  origin í—ˆìš© (React Native í˜¸í™˜)</li>
                </ul>
            </div>
        </div>
    </div>
    </div>
    <!-- API í…ŒìŠ¤íŠ¸ íƒ­ ë -->

    <!-- í”„ë¡¬í”„íŠ¸ í”Œë ˆì´ê·¸ë¼ìš´ë“œ íƒ­ ì‹œì‘ -->
    <div id="main-tab-prompt-playground" class="main-tab-content">
        <iframe src="/prompt-playground.html" style="width: 100%; height: 100vh; border: none;"></iframe>
    </div>
    <!-- í”„ë¡¬í”„íŠ¸ í”Œë ˆì´ê·¸ë¼ìš´ë“œ íƒ­ ë -->

    <!-- WebRTC í…ŒìŠ¤íŠ¸ íƒ­ ì‹œì‘ -->
    <div id="main-tab-webrtc-test" class="main-tab-content">
        <iframe src="/webrtc-test.html" style="width: 100%; height: 100vh; border: none;"></iframe>
    </div>
    <!-- WebRTC í…ŒìŠ¤íŠ¸ íƒ­ ë -->

    <script>
        const API_BASE_URL = window.location.origin;

        // ìƒ˜í”Œ ë°ì´í„°
        const samples = {
            1: "ì˜¤ëŠ˜ì€ ì•„ì¹¨ ì¼ì° ì¼ì–´ë‚˜ì„œ 30ë¶„ ì¡°ê¹…ì„ í–ˆì–´ìš”. ë‚ ì”¨ê°€ ë„ˆë¬´ ì¢‹ì•„ì„œ ê¸°ë¶„ì´ ìƒì¾Œí–ˆìŠµë‹ˆë‹¤. ì ì‹¬ì—ëŠ” íŒ€ íšŒì˜ê°€ ìˆì—ˆëŠ”ë° ìƒˆë¡œìš´ í”„ë¡œì íŠ¸ ì•„ì´ë””ì–´ë¥¼ ë°œí‘œí–ˆì–´ìš”. ë™ë£Œë“¤ì´ ê¸ì •ì ìœ¼ë¡œ ë°˜ì‘í•´ì¤˜ì„œ ë¿Œë“¯í–ˆìŠµë‹ˆë‹¤. ì €ë…ì—ëŠ” ì¹œêµ¬ì™€ ë§›ìˆëŠ” ì €ë…ì„ ë¨¹ìœ¼ë©´ì„œ ì˜¤ëœë§Œì— ìˆ˜ë‹¤ë¥¼ ë–¨ì—ˆì–´ìš”. ì •ë§ ì•Œì°¬ í•˜ë£¨ì˜€ìŠµë‹ˆë‹¤.",
            
            2: "ì˜¤ëŠ˜ ë“œë””ì–´ ìš´ë™ì„ ì‹œì‘í–ˆë‹¤! í—¬ìŠ¤ì¥ì— ë“±ë¡í•˜ê³  PT ì²« ìˆ˜ì—…ì„ ë°›ì•˜ëŠ”ë° ìƒê°ë³´ë‹¤ í˜ë“¤ì—ˆë‹¤. í•˜ì§€ë§Œ íŠ¸ë ˆì´ë„ˆë‹˜ì´ ì¹œì ˆí•˜ê²Œ ê°€ë¥´ì³ì£¼ì…”ì„œ ì¢‹ì•˜ë‹¤. ìŠ¤ì¿¼íŠ¸ë‘ ë²¤ì¹˜í”„ë ˆìŠ¤ë¥¼ ë°°ì› ëŠ”ë° ìì„¸ê°€ ì •ë§ ì¤‘ìš”í•˜ë‹¤ëŠ” ê±¸ ì•Œì•˜ë‹¤. ì§‘ì— ì™€ì„œ ë‹¨ë°±ì§ˆ ì‰ì´í¬ë„ ë§Œë“¤ì–´ ë§ˆì…¨ë‹¤. 3ê°œì›” í›„ ëª©í‘œ ì²´ì¤‘ì„ ë‹¬ì„±í•˜ê³  ì‹¶ë‹¤. ë‚´ì¼ë„ ê¼­ ê°€ì•¼ì§€!",
            
            3: "ì˜¤ëŠ˜ ê¸°ë¶„ ì¢‹ì•˜ì–´ìš”! ë‚ ì”¨ë„ ì¢‹ê³  ì ì‹¬ë„ ë§›ìˆì—ˆì–´ìš”."
        };

        function loadSample(num) {
            document.getElementById('diary-text').value = samples[num];
        }

        function clearText() {
            document.getElementById('diary-text').value = '';
        }

        async function organizeDiary() {
            const text = document.getElementById('diary-text').value.trim();
            const llmProvider = document.getElementById('diary-llm-provider').value;
            
            if (!text) {
                alert('í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            const loadingEl = document.getElementById('organize-loading');
            const responseEl = document.getElementById('organize-response');
            
            loadingEl.classList.remove('hidden');
            responseEl.classList.add('hidden');

            try {
                const startTime = Date.now();
                const response = await fetch(`${API_BASE_URL}/api/organize-diary`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ text, llmProvider })
                });

                const data = await response.json();
                const elapsed = ((Date.now() - startTime) / 1000).toFixed(2);
                
                loadingEl.classList.add('hidden');
                responseEl.classList.remove('hidden');

                if (data.success) {
                    // ì„±ê³µ ì‹œ êµ¬ì¡°í™”ëœ ì‘ë‹µ í‘œì‹œ
                    responseEl.className = 'response success';
                    responseEl.innerHTML = `
                        <h4>âœ… ì¼ê¸° ì •ë¦¬ ì™„ë£Œ!</h4>
                        
                        <div class="result-section">
                            <strong>ğŸ’¬ ì˜¤ëŠ˜ì˜ í•œì¤„</strong>
                            <p>${data.summary.oneLiner}</p>
                        </div>
                        
                        <div class="result-section">
                            <strong>ğŸ“Œ ì£¼ìš” ì¼ìƒ</strong>
                            <ul>${data.summary.dailyHighlights.length > 0 
                                ? data.summary.dailyHighlights.map(h => `<li>${h}</li>`).join('') 
                                : '<li style="opacity: 0.6;">ì—†ìŒ</li>'}</ul>
                        </div>
                        
                        <div class="result-section">
                            <strong>ğŸ¯ ëª©í‘œ ì¶”ì </strong>
                            <ul>${data.summary.goalTracking.length > 0 
                                ? data.summary.goalTracking.map(g => `<li>${g}</li>`).join('') 
                                : '<li style="opacity: 0.6;">ì—†ìŒ</li>'}</ul>
                        </div>
                        
                        <div class="result-section">
                            <strong>ğŸ™ ê°ì‚¬í•œ ì¼</strong>
                            <ul>${data.summary.gratitude.length > 0 
                                ? data.summary.gratitude.map(g => `<li>${g}</li>`).join('') 
                                : '<li style="opacity: 0.6;">ì—†ìŒ</li>'}</ul>
                        </div>
                        
                        <div class="result-section">
                            <strong>ğŸ˜Š ì£¼ìš” ê°ì •</strong>
                            <ul>${data.summary.emotions.length > 0 
                                ? data.summary.emotions.map(e => `<li>${e}</li>`).join('') 
                                : '<li style="opacity: 0.6;">ì—†ìŒ</li>'}</ul>
                        </div>
                        
                        <div class="result-section">
                            <strong>ğŸ“– ì „ì²´ ì¼ê¸°</strong>
                            <p>${data.summary.fullDiary}</p>
                        </div>
                        
                        <div class="meta-info">
                            <small>
                                LLM: ${data.llmProvider || 'openai'} (${data.model || 'gpt-4o'}) | 
                                ì›ë³¸ ê¸¸ì´: ${data.originalTextLength}ì | 
                                ì‚¬ìš© í† í°: ${data.tokensUsed} | 
                                ì‘ë‹µ ì‹œê°„: ${elapsed}ì´ˆ
                            </small>
                        </div>
                    `;
                } else {
                    // ì—ëŸ¬ ì‹œ
                    responseEl.className = 'response error';
                    responseEl.innerHTML = `
                        <h4>âŒ ì˜¤ë¥˜ ë°œìƒ</h4>
                        <p><strong>ì—ëŸ¬ ë©”ì‹œì§€:</strong> ${data.error}</p>
                        ${data.details ? `<p><strong>ìƒì„¸:</strong> ${data.details}</p>` : ''}
                        <pre style="margin-top: 15px; font-size: 0.85rem;">${JSON.stringify(data, null, 2)}</pre>
                    `;
                }
            } catch (error) {
                loadingEl.classList.add('hidden');
                responseEl.classList.remove('hidden');
                responseEl.className = 'response error';
                responseEl.innerHTML = `
                    <h4>âŒ ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜</h4>
                    <p>API í˜¸ì¶œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</p>
                    <p><strong>ì—ëŸ¬:</strong> ${error.message}</p>
                `;
            }
        }

        async function generateSpeech() {
            const text = document.getElementById('tts-text').value.trim();
            const voice = document.getElementById('tts-voice').value;
            
            if (!text) {
                alert('í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            const loadingEl = document.getElementById('tts-loading');
            const responseEl = document.getElementById('tts-response');
            
            loadingEl.classList.remove('hidden');
            responseEl.classList.add('hidden');

            try {
                const startTime = Date.now();
                const response = await fetch(`${API_BASE_URL}/api/audio/speech`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ text, voice })
                });

                if (response.ok && response.headers.get('content-type')?.includes('audio')) {
                    const audioBlob = await response.blob();
                    const audioUrl = URL.createObjectURL(audioBlob);
                    const elapsed = ((Date.now() - startTime) / 1000).toFixed(2);
                    
                    loadingEl.classList.add('hidden');
                    responseEl.classList.remove('hidden');
                    responseEl.className = 'response success';
                    responseEl.innerHTML = `
                        <h4>âœ… ìŒì„± ìƒì„± ì™„ë£Œ!</h4>
                        
                        <div class="result-section">
                            <strong>ğŸ”Š ìƒì„±ëœ ìŒì„±</strong>
                            <audio controls style="width: 100%; margin-top: 10px;">
                                <source src="${audioUrl}" type="audio/mpeg">
                                Your browser does not support the audio element.
                            </audio>
                        </div>
                        
                        <div class="meta-info">
                            <small>
                                ìŒì„±: ${voice} | 
                                í…ìŠ¤íŠ¸ ê¸¸ì´: ${text.length}ì | 
                                ì‘ë‹µ ì‹œê°„: ${elapsed}ì´ˆ
                            </small>
                        </div>
                    `;
                } else {
                    const data = await response.json();
                    loadingEl.classList.add('hidden');
                    responseEl.classList.remove('hidden');
                    responseEl.className = 'response error';
                    responseEl.innerHTML = `
                        <h4>âŒ ì˜¤ë¥˜ ë°œìƒ</h4>
                        <p><strong>ì—ëŸ¬ ë©”ì‹œì§€:</strong> ${data.error}</p>
                        ${data.details ? `<p><strong>ìƒì„¸:</strong> ${data.details}</p>` : ''}
                    `;
                }
            } catch (error) {
                loadingEl.classList.add('hidden');
                responseEl.classList.remove('hidden');
                responseEl.className = 'response error';
                responseEl.innerHTML = `
                    <h4>âŒ ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜</h4>
                    <p>API í˜¸ì¶œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</p>
                    <p><strong>ì—ëŸ¬:</strong> ${error.message}</p>
                `;
            }
        }

        async function extractContext() {
            const conversationText = document.getElementById('context-conversation').value.trim();
            const llmProvider = document.getElementById('context-llm-provider').value;
            
            if (!conversationText) {
                alert('ëŒ€í™” ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            const loadingEl = document.getElementById('context-loading');
            const responseEl = document.getElementById('context-response');
            
            loadingEl.classList.remove('hidden');
            responseEl.classList.add('hidden');

            try {
                const startTime = Date.now();
                const response = await fetch(`${API_BASE_URL}/api/context/extract`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ conversationText, llmProvider })
                });

                const data = await response.json();
                const elapsed = ((Date.now() - startTime) / 1000).toFixed(2);
                
                loadingEl.classList.add('hidden');
                responseEl.classList.remove('hidden');

                if (data.success) {
                    responseEl.className = 'response success';
                    responseEl.innerHTML = `
                        <h4>âœ… ì»¨í…ìŠ¤íŠ¸ ì¶”ì¶œ ì™„ë£Œ!</h4>
                        
                        <div class="result-section">
                            <strong>ğŸ§  ì¶”ì¶œëœ ì»¨í…ìŠ¤íŠ¸</strong>
                            <p style="line-height: 1.8; white-space: pre-wrap;">${data.context}</p>
                        </div>
                        
                        <div class="meta-info">
                            <small>
                                LLM: ${data.llmProvider || 'openai'} (${data.model || 'gpt-4o'}) | 
                                ëŒ€í™” ê¸¸ì´: ${data.conversationLength}ì | 
                                ì‚¬ìš© í† í°: ${data.tokensUsed} | 
                                ì‘ë‹µ ì‹œê°„: ${elapsed}ì´ˆ
                            </small>
                        </div>
                    `;
                } else {
                    responseEl.className = 'response error';
                    responseEl.innerHTML = `
                        <h4>âŒ ì˜¤ë¥˜ ë°œìƒ</h4>
                        <p><strong>ì—ëŸ¬ ë©”ì‹œì§€:</strong> ${data.error}</p>
                        ${data.details ? `<p><strong>ìƒì„¸:</strong> ${data.details}</p>` : ''}
                    `;
                }
            } catch (error) {
                loadingEl.classList.add('hidden');
                responseEl.classList.remove('hidden');
                responseEl.className = 'response error';
                responseEl.innerHTML = `
                    <h4>âŒ ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜</h4>
                    <p>API í˜¸ì¶œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</p>
                    <p><strong>ì—ëŸ¬:</strong> ${error.message}</p>
                `;
            }
        }

        async function transcribeAudio() {
            const fileInput = document.getElementById('audio-file');
            const file = fileInput.files[0];
            
            if (!file) {
                alert('ì˜¤ë””ì˜¤ íŒŒì¼ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
                return;
            }

            // íŒŒì¼ í¬ê¸° ì²´í¬ (10MB)
            if (file.size > 10 * 1024 * 1024) {
                alert('íŒŒì¼ í¬ê¸°ê°€ 10MBë¥¼ ì´ˆê³¼í•©ë‹ˆë‹¤.');
                return;
            }

            const loadingEl = document.getElementById('transcribe-loading');
            const responseEl = document.getElementById('transcribe-response');
            
            loadingEl.classList.remove('hidden');
            responseEl.classList.add('hidden');

            try {
                const formData = new FormData();
                formData.append('file', file);

                const startTime = Date.now();
                const response = await fetch(`${API_BASE_URL}/api/audio/transcribe`, {
                    method: 'POST',
                    body: formData
                });

                const data = await response.json();
                const elapsed = ((Date.now() - startTime) / 1000).toFixed(2);
                
                loadingEl.classList.add('hidden');
                responseEl.classList.remove('hidden');

                if (data.success) {
                    responseEl.className = 'response success';
                    responseEl.innerHTML = `
                        <h4>âœ… ìŒì„± ì „ì‚¬ ì™„ë£Œ!</h4>
                        
                        <div class="result-section">
                            <strong>ğŸ“ ì „ì‚¬ëœ í…ìŠ¤íŠ¸</strong>
                            <p style="line-height: 1.8; white-space: pre-wrap;">${data.text}</p>
                        </div>
                        
                        <div class="meta-info">
                            <small>
                                íŒŒì¼: ${file.name} (${(file.size / 1024).toFixed(1)} KB) | 
                                ì–¸ì–´: ${data.language || 'í•œêµ­ì–´'} | 
                                ì‘ë‹µ ì‹œê°„: ${elapsed}ì´ˆ
                            </small>
                        </div>
                    `;
                } else {
                    responseEl.className = 'response error';
                    responseEl.innerHTML = `
                        <h4>âŒ ì˜¤ë¥˜ ë°œìƒ</h4>
                        <p><strong>ì—ëŸ¬ ë©”ì‹œì§€:</strong> ${data.error}</p>
                        ${data.details ? `<p><strong>ìƒì„¸:</strong> ${data.details}</p>` : ''}
                        <pre style="margin-top: 15px; font-size: 0.85rem;">${JSON.stringify(data, null, 2)}</pre>
                    `;
                }
            } catch (error) {
                loadingEl.classList.add('hidden');
                responseEl.classList.remove('hidden');
                responseEl.className = 'response error';
                responseEl.innerHTML = `
                    <h4>âŒ ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜</h4>
                    <p>API í˜¸ì¶œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</p>
                    <p><strong>ì—ëŸ¬:</strong> ${error.message}</p>
                `;
            }
        }

        async function createRealtimeToken() {
            const model = document.getElementById('realtime-model').value;
            const voice = document.getElementById('realtime-voice').value;
            const instructions = document.getElementById('realtime-instructions').value.trim();
            
            if (!instructions) {
                alert('ì‹œìŠ¤í…œ ì§€ì‹œì‚¬í•­ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            const loadingEl = document.getElementById('realtime-token-loading');
            const responseEl = document.getElementById('realtime-token-response');
            
            loadingEl.classList.remove('hidden');
            responseEl.classList.add('hidden');

            try {
                const startTime = Date.now();
                const response = await fetch(`${API_BASE_URL}/api/realtime/token`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        userId: 'test_user_web_ui',
                        sessionConfig: {
                            model,
                            voice,
                            instructions,
                        }
                    })
                });

                const data = await response.json();
                const elapsed = ((Date.now() - startTime) / 1000).toFixed(2);
                
                loadingEl.classList.add('hidden');
                responseEl.classList.remove('hidden');

                if (data.success) {
                    const expiresIn = Math.floor((data.expiresAt - Date.now() / 1000) / 60);
                    const expiresAtDate = new Date(data.expiresAt * 1000);
                    
                    responseEl.className = 'response success';
                    responseEl.innerHTML = `
                        <h4>âœ… Ephemeral Token ë°œê¸‰ ì™„ë£Œ!</h4>
                        
                        <div class="result-section">
                            <strong>ğŸ”‘ Token (í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì‚¬ìš©)</strong>
                            <p style="word-break: break-all; font-family: 'Courier New', monospace; background: rgba(0,0,0,0.05); padding: 12px; border-radius: 5px; border: 1px solid #ddd;">
                                ${data.token}
                            </p>
                            <button class="btn-small" onclick="copyToClipboard('${data.token}', this)">
                                ğŸ“‹ í† í° ë³µì‚¬
                            </button>
                        </div>
                        
                        <div class="result-section">
                            <strong>ğŸ†” ì„¸ì…˜ ID</strong>
                            <p style="font-family: monospace;">${data.sessionId}</p>
                        </div>
                        
                        <div class="result-section">
                            <strong>â° ë§Œë£Œ ì‹œê°„</strong>
                            <p>ğŸ“… ${expiresAtDate.toLocaleString('ko-KR')}</p>
                            <p style="color: ${expiresIn < 5 ? '#d32f2f' : '#1976d2'}; font-weight: bold;">
                                â±ï¸ ì•½ ${expiresIn}ë¶„ í›„ ë§Œë£Œ
                            </p>
                        </div>
                        
                        <div class="result-section">
                            <strong>âš™ï¸ ì„¸ì…˜ ì„¤ì •</strong>
                            <p><strong>ëª¨ë¸:</strong> ${data.config.model}</p>
                            <p><strong>ìŒì„±:</strong> ${data.config.voice}</p>
                        </div>
                        
                        <div class="meta-info">
                            <small>ì‘ë‹µ ì‹œê°„: ${elapsed}ì´ˆ</small>
                        </div>
                        
                        <div style="margin-top: 20px; padding: 15px; background: #e3f2fd; border-radius: 8px; border-left: 4px solid #2196f3;">
                            <strong>ğŸ’¡ React Native ì•± ì‚¬ìš© ë°©ë²•:</strong>
                            <pre style="background: #fff; padding: 12px; border-radius: 5px; font-size: 0.85rem; margin-top: 10px; overflow-x: auto;">// WebRTC ì—°ê²° ì‹œ ì´ í† í° ì‚¬ìš©
const sdpResponse = await fetch(
  'https://api.openai.com/v1/realtime/calls',
  {
    method: 'POST',
    body: offer.sdp,
    headers: {
      Authorization: 'Bearer ${data.token}',
      'Content-Type': 'application/sdp',
    },
  }
);</pre>
                        </div>
                        
                        <div style="margin-top: 15px; padding: 15px; background: #fff3e0; border-radius: 8px; border-left: 4px solid #ff9800;">
                            <strong>âš ï¸ ì£¼ì˜ì‚¬í•­:</strong>
                            <ul style="margin: 10px 0; padding-left: 20px; line-height: 1.6;">
                                <li>ì´ í† í°ì€ 30ë¶„ í›„ ìë™ìœ¼ë¡œ ë§Œë£Œë©ë‹ˆë‹¤</li>
                                <li>í† í°ìœ¼ë¡œ ì‹œì‘í•œ ì„¸ì…˜ì€ ë§Œë£Œ í›„ì—ë„ ê³„ì† ìœ ì§€ë©ë‹ˆë‹¤</li>
                                <li>ìƒˆë¡œìš´ ì„¸ì…˜ì„ ì‹œì‘í•˜ë ¤ë©´ ìƒˆ í† í°ì„ ë°œê¸‰ë°›ì•„ì•¼ í•©ë‹ˆë‹¤</li>
                            </ul>
                        </div>
                    `;
                } else {
                    responseEl.className = 'response error';
                    responseEl.innerHTML = `
                        <h4>âŒ í† í° ë°œê¸‰ ì‹¤íŒ¨</h4>
                        <p><strong>ì—ëŸ¬:</strong> ${data.error}</p>
                        ${data.details ? `<p><strong>ìƒì„¸:</strong> ${data.details}</p>` : ''}
                        <pre style="margin-top: 15px; font-size: 0.85rem; background: rgba(0,0,0,0.05); padding: 10px; border-radius: 5px;">${JSON.stringify(data, null, 2)}</pre>
                    `;
                }
            } catch (error) {
                loadingEl.classList.add('hidden');
                responseEl.classList.remove('hidden');
                responseEl.className = 'response error';
                responseEl.innerHTML = `
                    <h4>âŒ ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜</h4>
                    <p>API í˜¸ì¶œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</p>
                    <p><strong>ì—ëŸ¬:</strong> ${error.message}</p>
                `;
            }
        }

        function copyToClipboard(text, buttonElement) {
            navigator.clipboard.writeText(text).then(() => {
                const originalText = buttonElement.textContent;
                buttonElement.textContent = 'âœ… ë³µì‚¬ë¨!';
                buttonElement.style.background = '#28a745';
                
                setTimeout(() => {
                    buttonElement.textContent = originalText;
                    buttonElement.style.background = '';
                }, 2000);
            }).catch(err => {
                alert('ë³µì‚¬ ì‹¤íŒ¨: ' + err.message);
            });
        }

        function copyCurl() {
            const curlCommand = document.getElementById('curl-command').textContent;
            
            navigator.clipboard.writeText(curlCommand).then(() => {
                const btn = event.target;
                const originalText = btn.textContent;
                btn.textContent = 'âœ… ë³µì‚¬ë¨!';
                btn.style.background = '#28a745';
                
                setTimeout(() => {
                    btn.textContent = originalText;
                    btn.style.background = '';
                }, 2000);
            }).catch(err => {
                alert('ë³µì‚¬ ì‹¤íŒ¨: ' + err.message);
            });
        }

        // Enter í‚¤ë¡œ ì „ì†¡
        document.getElementById('diary-text').addEventListener('keydown', function(e) {
            if (e.ctrlKey && e.key === 'Enter') {
                organizeDiary();
            }
        });

        // ============================================
        // ë©”ì¸ íƒ­ ì „í™˜ í•¨ìˆ˜
        // ============================================
        function switchMainTab(tabName) {
            // ëª¨ë“  ë©”ì¸ íƒ­ ë²„íŠ¼ ë¹„í™œì„±í™”
            document.querySelectorAll('.main-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // ëª¨ë“  ë©”ì¸ íƒ­ ì»¨í…ì¸  ìˆ¨ê¸°ê¸°
            document.querySelectorAll('.main-tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // ì„ íƒí•œ íƒ­ í™œì„±í™”
            event.target.classList.add('active');
            document.getElementById(`main-tab-${tabName}`).classList.add('active');
            
            // í”„ë¡¬í”„íŠ¸ í”Œë ˆì´ê·¸ë¼ìš´ë“œ íƒ­ ì„ íƒ ì‹œ ì´ˆê¸°í™”
            if (tabName === 'prompt-playground' && !window.playgroundInitialized) {
                initializePlayground();
                window.playgroundInitialized = true;
            }
        }

        // í”„ë¡¬í”„íŠ¸ í”Œë ˆì´ê·¸ë¼ìš´ë“œ ì´ˆê¸°í™” (ì§€ì—° ë¡œë”©)
        function initializePlayground() {
            console.log('Initializing Prompt Playground...');
            // playground ìŠ¤í¬ë¦½íŠ¸ëŠ” ì´ë¯¸ í•˜ë‹¨ì— í¬í•¨ë˜ì–´ ìˆìŒ
        }
    </script>
</body>
</html>
